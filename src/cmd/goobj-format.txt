## objapi.HeaderString()

首先写入HeaderString()，然后可以写入任何字符串，最终由 '\n' '!' '\n' 结束

asm/main.go
		buf.WriteString(objabi.HeaderString())
		fmt.Fprintf(buf, "!\n")

```txt
go object linux amd64 go1.17.2 X:regabiwrappers,regabig,regabireflect,regabidefer,regabiargs

build id "jCKcapZqREPfScPWbV7E/UsYGU0IhOxCWCwL4VARB"
main // link用来判断是否为main packge


$$

$$


$$  // cgo
[["cgo_ldflag","-g"],["cgo_import_dynamic","__stack_chk_fail", "__stack_chk_fail#GLIBC_2.4","libc.so.6"]]  // 所有cgo指令

$$



!  // 结束标志

```


## 写入goobj.Header

./internal/goobj/objfile.go

const (
	ObjFlagShared            = 1 << iota // this object is built with -shared
	ObjFlagNeedNameExpansion             // the linker needs to expand `"".` to package path in symbol names
	ObjFlagFromAssembly                  // object is from asm src, not go
)

const Magic = "\x00go117ld"

type Header struct {
	Magic       string
	Fingerprint FingerprintType  // 8字节
	Flags       uint32
	Offsets     [NBlk]uint32
}

## 写入string table

把所有需要的string写入文件，同时记录每个string在文件中偏移量.
string结尾没有\0

通过StringRef {len + off}来引用

## 写入Autolib，即ImportedPkg列表

每个导入的Package都写入一项: StringRef + Fingerprint


link加载go object时会通过读取autolib数据来确定依赖项.
